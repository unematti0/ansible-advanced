# Apache/Nginx seadistused
---
apache_package: apache2
php_package: libapache2-mod-php

max_workers: "{{ ansible_processor_vcpus * 2 }}"
max_connections: 1000
keepalive_timeout: 65
# PHP seadistused
php_version: "7.4"
php_memory_limit: "{% if ansible_memtotal_mb > 4096 %}512M{% else %}256M{% endif %}"
php_max_execution_time: 30
# Virtual hosts
virtual_hosts:

  - name: "{{ app_name }}.local"
    document_root: "{{ web_root }}/{{ app_name }}"
    ssl_enabled: "{{ ssl_enabled }}"
  - name: "api.{{ app_name }}.local"
    document_root: "{{ web_root }}/api"
    ssl_enabled: "{{ ssl_enabled }}"
